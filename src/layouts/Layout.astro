---
import { ViewTransitions } from "astro:transitions";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import SEO from "../components/SEO.astro"; // 1. Importar el componente SEO
import "../styles/global.css";

interface Props {
	title: string;
	description: string;
}

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="es">
	<head>
		<!-- 2. Usar el componente SEO y quitar las etiquetas anteriores -->
		<SEO title={title} description={description} />
		
		<meta name="generator" content={Astro.generator} />
		<ViewTransitions />
	</head>
	<body
		class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-sans flex flex-col min-h-screen"
	>
		<Header />
		<main class="container mx-auto px-4 py-8 flex-grow">
			<slot />
		</main>
		<Footer />
		<script is:inline>
			// Este script se asegura de que no haya un "destello" del tema incorrecto.
			const theme = (() => {
				if (
					typeof localStorage !== "undefined" &&
					localStorage.getItem("theme")
				) {
					return localStorage.getItem("theme");
				}
				if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
					return "dark";
				}
				return "light";
			})();

			if (theme === "light") {
				document.documentElement.classList.remove("dark");
			} else {
				document.documentElement.classList.add("dark");
			}
			// Sincronizar en todas las pestaÃ±as
			window.addEventListener("storage", () => {
				if (localStorage.getItem("theme") === "dark") {
					document.documentElement.classList.add("dark");
				} else {
					document.documentElement.classList.remove("dark");
				}
			});
		</script>
	</body>
</html>
