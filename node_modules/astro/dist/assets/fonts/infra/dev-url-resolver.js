import { joinPaths, prependForwardSlash } from "../../../core/path.js";
import { createPlaceholderURL, stringifyPlaceholderURL } from "../../utils/url.js";
function createDevUrlResolver({
  base,
  searchParams
}) {
  let resolved = false;
  return {
    resolve(hash) {
      resolved ||= true;
      const urlPath = prependForwardSlash(joinPaths(base, hash));
      const url = createPlaceholderURL(urlPath);
      searchParams.forEach((value, key) => {
        url.searchParams.set(key, value);
      });
      return stringifyPlaceholderURL(url);
    },
    getCspResources() {
      return resolved ? ["'self'"] : [];
    }
  };
}
export {
  createDevUrlResolver
};
